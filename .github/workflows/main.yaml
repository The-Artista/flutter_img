name: check_PR

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

on:
  pull_request:
    branches:
      - main

jobs:
  semantic_pull_request:
    uses: VeryGoodOpenSource/very_good_workflows/.github/workflows/semantic_pull_request.yml@v1

  spell-check:
    uses: VeryGoodOpenSource/very_good_workflows/.github/workflows/spell_check.yml@v1
    with:
      includes: "**/*.md"
      modified_files_only: false
  change_version:
    name: change_version
    runs-on: ubuntu-latest
    steps:
      - name: change version number
        run: |
          set -e

          # Find and increment the version number.
            perl -i -pe 's/^(version:\s+\d+\.\d+\.\d+\+)(\d+)$/$1.($2+1)/e' ./pubspec.yaml

          # Commit and tag this change.
          git add pubspec.yaml
          chmod +x .git/hooks/pre-commit
